<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>BMP SmartQuiz Online Loader</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;margin:0;padding:24px;line-height:1.4}
    .box{max-width:820px;margin:0 auto;padding:16px 18px;border:1px solid #ddd;border-radius:12px}
    code{word-break:break-all}
  </style>
</head>
<body>
  <div class="box">
    <h2>â³ Äang táº£i Ä‘á»...</h2>
    <div id="msg">Vui lÃ²ng chá» trong giÃ¢y lÃ¡t.</div>
    <div style="margin-top:10px;color:#666;font-size:13px">
      Náº¿u Ä‘á»©ng mÃ£i, hÃ£y kiá»ƒm tra link cÃ³ dáº¡ng <code>?data=...</code> vÃ  Gist raw_url cÃ²n truy cáº­p Ä‘Æ°á»£c.
    </div>
  </div>

<script>
(function(){
  const msg = (t)=>{ try{ document.getElementById('msg').innerHTML = t; }catch(e){} };

  function getParam(name){
    try{
      const u = new URL(window.location.href);
      return u.searchParams.get(name) || '';
    }catch(e){
      // fallback
      const m = new RegExp('[?&]'+name+'=([^&]+)').exec(location.search);
      return m ? decodeURIComponent(m[1]) : '';
    }
  }

  const data = getParam('data');
  if(!data){
    msg('âŒ Thiáº¿u tham sá»‘ <code>data</code> trong URL.<br/>VÃ­ dá»¥: <code>?data=BASE64(raw_url)</code>');
    return;
  }

  let rawUrl = '';
  try{
    rawUrl = atob(data);
  }catch(e){
    msg('âŒ KhÃ´ng giáº£i mÃ£ Ä‘Æ°á»£c <code>data</code> (base64).');
    return;
  }
  rawUrl = (rawUrl||'').trim();
  if(!/^https?:\/\//i.test(rawUrl)){
    msg('âŒ <code>raw_url</code> khÃ´ng há»£p lá»‡: <code>'+rawUrl+'</code>');
    return;
  }

  msg('ğŸ”— Äang táº£i ná»™i dung Ä‘á» tá»«:<br/><code>'+rawUrl+'</code>');

  fetch(rawUrl, {cache:'no-store'})
    .then(r=>{
      if(!r.ok) throw new Error('HTTP '+r.status);
      return r.text();
    })
    .then(html=>{
      // Replace current document with fetched HTML (origin stays GitHub Pages)
      document.open();
      document.write(html);
      document.close();
    })
    .catch(err=>{
      msg('âŒ Táº£i tháº¥t báº¡i: <b>'+String(err)+'</b><br/>HÃ£y má»Ÿ thá»­ raw_url trÃªn trÃ¬nh duyá»‡t Ä‘á»ƒ kiá»ƒm tra cÃ³ bá»‹ 404 hay bá»‹ private khÃ´ng.');
    });
})();
</script>
</body>
</html>

